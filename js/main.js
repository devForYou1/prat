function createSvgElement(tagName,attributes){const svg=document.createElementNS("http://www.w3.org/2000/svg",tagName);for(const key in attributes)attributes.hasOwnProperty(key)&&("xlinkHref"===key?svg.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",attributes[key]):svg.setAttribute(key,attributes[key]));return svg}let currentModalElement=null,lastScrollY=0,scrollbarWidth=0;function getScrollbarWidth(){const outer=document.createElement("div");outer.style.visibility="hidden";outer.style.overflow="scroll";document.body.appendChild(outer);const inner=document.createElement("div");outer.appendChild(inner);const scrollbarWidth=outer.offsetWidth-inner.offsetWidth;return outer.parentNode.removeChild(outer),scrollbarWidth}function handleEscapeKey(event){"Escape"===event.key&&closeInfoModal()}function createInfoModalStructure(closeCallback,contentHtml){const tempDiv=document.createElement("div");tempDiv.innerHTML=contentHtml;const h2Element=tempDiv.querySelector("h2");const modalTitleText=h2Element?h2Element.textContent:"פרטים נוספים";const modalBackdrop=document.createElement("div");modalBackdrop.className="custom-modal-backdrop";modalBackdrop.setAttribute("aria-modal","true");modalBackdrop.setAttribute("role","dialog");const modalContent=document.createElement("div");modalContent.className="custom-modal-content";const modalHeader=document.createElement("div");modalHeader.className="custom-modal-header";const modalTitle=document.createElement("h2");modalTitle.className="custom-modal-title";modalTitle.textContent=modalTitleText;modalTitle.id="modal-title";const closeButton=document.createElement("button");closeButton.className="custom-modal-close-button",closeButton.innerHTML="&times;",closeButton.onclick=closeCallback,closeButton.setAttribute("aria-label","סגור"),modalHeader.appendChild(modalTitle),modalHeader.appendChild(closeButton),h2Element&&h2Element.remove(),tempDiv.innerHTML=tempDiv.innerHTML,modalContent.appendChild(modalHeader),modalContent.appendChild(tempDiv),modalBackdrop.appendChild(modalContent),modalBackdrop.addEventListener("click",event=>{event.target===modalBackdrop&&closeCallback()});return modalBackdrop}function openInfoModal(contentHtml){currentModalElement&&document.body.contains(currentModalElement)&&(document.body.removeChild(currentModalElement),document.removeEventListener("keydown",handleEscapeKey),currentModalElement=null),lastScrollY=window.scrollY,0===scrollbarWidth&&(scrollbarWidth=getScrollbarWidth()),currentModalElement=createInfoModalStructure(closeInfoModal,contentHtml),document.body.appendChild(currentModalElement),requestAnimationFrame(()=>{currentModalElement.classList.add("show"),currentModalElement.querySelector(".custom-modal-content").classList.add("show")}),document.body.classList.add("modal-open"),document.documentElement.classList.add("modal-open"),scrollbarWidth>0&&(document.body.style.paddingRight=scrollbarWidth+"px");const mainContainer=document.querySelector(".main-container-border");mainContainer&&mainContainer.classList.add("modal-open"),document.addEventListener("keydown",handleEscapeKey),currentModalElement.querySelector(".custom-modal-content").focus()}function closeInfoModal(){if(currentModalElement){currentModalElement.classList.remove("show"),currentModalElement.querySelector(".custom-modal-content").classList.remove("show"),document.removeEventListener("keydown",handleEscapeKey);currentModalElement.addEventListener("transitionend",()=>{if(currentModalElement&&!currentModalElement.classList.contains("show")){document.body.removeChild(currentModalElement),currentModalElement=null,document.body.classList.remove("modal-open"),document.documentElement.classList.remove("modal-open"),document.body.style.paddingRight="";const mainContainer=document.querySelector(".main-container-border");mainContainer&&mainContainer.classList.remove("modal-open"),window.scrollTo(0,lastScrollY)}},{once:!0})}}function debounce(func,delay){let timeout;return function(...args){const context=this;clearTimeout(timeout),timeout=setTimeout(()=>func.apply(context,args),delay)}}function renderApp(contentData){const appRoot=document.getElementById("app-root");if(!appRoot)return void console.error("App root element not found!");appRoot.innerHTML="";const mainContainer=document.createElement("div");mainContainer.className="main-container-border animate-main-container";const shimmerDiv=document.createElement("div");shimmerDiv.className="shimmer-effect";mainContainer.appendChild(shimmerDiv);const logoContainer=document.createElement("div");logoContainer.className="logo-container";const taazLogo=document.createElement("img");taazLogo.src="https://res.cloudinary.com/dwbq7b5vg/image/upload/v1751868710/logo_taaz_hwq7ly.png";taazLogo.alt="לוגו תעץ";taazLogo.className="taaz-main-logo";taazLogo.loading="lazy";logoContainer.appendChild(taazLogo);mainContainer.appendChild(logoContainer);const mainTitleElement=document.createElement("h1");mainTitleElement.textContent=contentData.mainTitle;mainContainer.appendChild(mainTitleElement);contentData.introParagraphs.forEach(paragraphText=>{const p=document.createElement("p");p.className="intro-paragraph-text";p.textContent=paragraphText;mainContainer.appendChild(p)});const mottoParagraph=document.createElement("p");mottoParagraph.className="motto-text";mottoParagraph.textContent=contentData.motto;mainContainer.appendChild(mottoParagraph);const searchInput=document.createElement("input");searchInput.type="text";searchInput.placeholder="חיפוש...";searchInput.className="search-input";searchInput.setAttribute("aria-label","חיפוש בתוכן");mainContainer.appendChild(searchInput);const accordionContainer=document.createElement("div");accordionContainer.className="accordion-container";mainContainer.appendChild(accordionContainer);contentData.sections.forEach(section=>{const accordionItemContainer=document.createElement("div");accordionItemContainer.className="accordion-item-container";const accordionHeaderButton=document.createElement("button");accordionHeaderButton.className="accordion-header-button";accordionHeaderButton.setAttribute("aria-expanded","false");accordionHeaderButton.setAttribute("aria-controls",section.id+"-collapse");const accordionTitleText=document.createElement("span");accordionTitleText.className="accordion-title-text";accordionTitleText.textContent=section.title;accordionHeaderButton.appendChild(accordionTitleText);const arrowIcon=document.createElement("span");arrowIcon.className="arrow-icon";arrowIcon.innerHTML=`\n            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-5 h-5">\n                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />\n            </svg>\n        `;accordionHeaderButton.appendChild(arrowIcon);const collapseGrid=document.createElement("div");collapseGrid.id=section.id+"-collapse";collapseGrid.className="collapse-grid";if(section.isDirectContent){let contentDiv;if(section.id==="head-of-taatz-message"){contentDiv=collapseGrid}else{contentDiv=document.createElement("div");contentDiv.className="content-section"}contentDiv.innerHTML=section.contentHtml;if(section.id!=="head-of-taatz-message"){collapseGrid.appendChild(contentDiv)}}else{const subCardContainer=document.createElement("div");subCardContainer.className="sub-card-container";section.subItems.forEach(subItem=>{const subCardButton=document.createElement("button");subCardButton.className="subcard-button";subCardButton.textContent=subItem.title;subCardButton.onclick=()=>openInfoModal(subItem.content);subCardContainer.appendChild(subCardButton)});collapseGrid.appendChild(subCardContainer)}accordionHeaderButton.onclick=()=>{if(window.innerWidth>768)return;const isOpen=accordionItemContainer.classList.toggle("open");collapseGrid.classList.toggle("show",isOpen);accordionHeaderButton.setAttribute("aria-expanded",isOpen)};accordionItemContainer.appendChild(accordionHeaderButton);accordionItemContainer.appendChild(collapseGrid);accordionContainer.appendChild(accordionItemContainer)});const footerCard=document.createElement("footer");footerCard.className="footer-card";const footerLinksContainer=document.createElement("div");footerLinksContainer.className="footer-links-container";contentData.footerLinks.forEach(link=>{const linkElement=document.createElement("a");linkElement.href=link.href;linkElement.target="_blank";linkElement.rel="noopener noreferrer";linkElement.className="footer-link-square";linkElement.setAttribute("aria-label",link.alt);const svgIconContainer=document.createElement("div");svgIconContainer.className="footer-svg-icon";if(link.imgSrc){const img=document.createElement("img");img.src=link.imgSrc;img.alt=link.alt;img.loading="lazy";img.onerror=function(){this.src="https://placehold.co/32x32/cccccc/000000?text=Error"};svgIconContainer.appendChild(img)}else if(link.svgContent){const tempDiv=document.createElement("div");tempDiv.innerHTML=link.svgContent;if(tempDiv.firstChild){svgIconContainer.appendChild(tempDiv.firstChild)}}linkElement.appendChild(svgIconContainer);footerLinksContainer.appendChild(linkElement)});footerCard.appendChild(footerLinksContainer);mainContainer.appendChild(footerCard);appRoot.appendChild(mainContainer);const debouncedSearch=debounce(event=>{const searchTerm=event.target.value.toLowerCase();contentData.sections.forEach(section=>{const itemContainer=document.getElementById(section.id+"-collapse").closest(".accordion-item-container");let sectionMatches=!1;if(section.title.toLowerCase().includes(searchTerm)){sectionMatches=!0}if(!section.isDirectContent){const matchingSubItems=section.subItems.filter(subItem=>subItem.title.toLowerCase().includes(searchTerm)||subItem.content.toLowerCase().includes(searchTerm));if(matchingSubItems.length>0){sectionMatches=!0}const subButtons=itemContainer.querySelectorAll(".subcard-button");subButtons.forEach(button=>{const subItem=section.subItems.find(item=>item.title===button.textContent);if(subItem){(subItem.title.toLowerCase().includes(searchTerm)||subItem.content.toLowerCase().includes(searchTerm))?button.style.display="block":button.style.display="none"}})}else if(section.contentHtml.toLowerCase().includes(searchTerm)){sectionMatches=!0}if(""===searchTerm){itemContainer.style.display="block";if(window.innerWidth<=768){itemContainer.classList.remove("open");document.getElementById(section.id+"-collapse").classList.remove("show")}itemContainer.querySelectorAll(".subcard-button").forEach(button=>{button.style.display="block"})}else if(sectionMatches){itemContainer.style.display="block";itemContainer.classList.add("open");document.getElementById(section.id+"-collapse").classList.add("show")}else{itemContainer.style.display="none"}})},300);searchInput.addEventListener("input",debouncedSearch);const scrollToTopBtn=document.getElementById("scroll-to-top-btn");window.addEventListener("scroll",()=>{window.scrollY>300?scrollToTopBtn.classList.add("show"):scrollToTopBtn.classList.remove("show")});scrollToTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});document.addEventListener("click",function(event){let textToCopy="";if(event.target.classList.contains("copy-button")){const contentSection=event.target.closest(".content-section");if(contentSection){const paragraphs=contentSection.querySelectorAll("p");const listItems=contentSection.querySelectorAll("li");paragraphs.forEach(p=>{textToCopy+=p.textContent+"\n"});listItems.forEach(li=>{textToCopy+="- "+li.textContent+"\n"})}}if(textToCopy){try{const textarea=document.createElement("textarea");textarea.value=textToCopy;document.body.appendChild(textarea);textarea.select();document.execCommand("copy");document.body.removeChild(textarea);const feedbackDiv=document.createElement("div");feedbackDiv.textContent="הועתק!";feedbackDiv.style.cssText=`
                    position: fixed;
                    bottom: 80px;
                    right: 20px;
                    background-color: #28a745;
                    color: white;
                    padding: 10px 15px;
                    border-radius: 8px;
                    z-index: 1060;
                    opacity: 0;
                    transition: opacity 0.3s ease-out;
                `;document.body.appendChild(feedbackDiv);setTimeout(()=>{feedbackDiv.style.opacity="1"},10);setTimeout(()=>{feedbackDiv.style.opacity="0",feedbackDiv.addEventListener("transitionend",()=>feedbackDiv.remove())},1500)}catch(err){console.error("Failed to copy text: ",err)}})});document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded - Initializing app for sal_kelim.html");window.salKelimContentData?renderApp(window.salKelimContentData):console.error("salKelimContentData is not defined.")});
