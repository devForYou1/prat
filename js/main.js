function createSvgElement(e,t){let l=document.createElementNS("http://www.w3.org/2000/svg",e);for(let n in t)t.hasOwnProperty(n)&&("xlinkHref"===n?l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t[n]):l.setAttribute(n,t[n]));return l}let currentModalElement=null,lastScrollY=0,scrollbarWidth=0;function getScrollbarWidth(){let e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",document.body.appendChild(e);let t=document.createElement("div");e.appendChild(t);let l=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),l}function handleEscapeKey(e){"Escape"===e.key&&closeInfoModal()}function createInfoModalStructure(e,t){let l=document.createElement("div");l.innerHTML=t;let n=l.querySelector("h2"),a=n?n.textContent:"פרטים נוספים",o=document.createElement("div");o.className="custom-modal-backdrop",o.setAttribute("aria-modal","true"),o.setAttribute("role","dialog");let r=document.createElement("div");r.className="custom-modal-content";let s=document.createElement("div");s.className="custom-modal-header";let i=document.createElement("h2");i.className="custom-modal-title",i.textContent=a,i.id="modal-title";let d=document.createElement("button");d.className="custom-modal-close-button",d.innerHTML="&times;",d.onclick=e,d.setAttribute("aria-label","סגור"),s.appendChild(i),s.appendChild(d);let c=document.createElement("div");return c.className="custom-modal-scrollable-body",c.setAttribute("tabindex","0"),n&&n.remove(),c.innerHTML=l.innerHTML,r.appendChild(s),r.appendChild(c),o.appendChild(r),o.addEventListener("click",t=>{t.target===o&&e()}),o}function openInfoModal(e){currentModalElement&&document.body.contains(currentModalElement)&&(document.body.removeChild(currentModalElement),document.removeEventListener("keydown",handleEscapeKey),currentModalElement=null),lastScrollY=window.scrollY,0===scrollbarWidth&&(scrollbarWidth=getScrollbarWidth()),currentModalElement=createInfoModalStructure(closeInfoModal,e),document.body.appendChild(currentModalElement),requestAnimationFrame(()=>{currentModalElement.classList.add("show"),currentModalElement.querySelector(".custom-modal-content").classList.add("show")}),document.body.classList.add("modal-open"),document.documentElement.classList.add("modal-open"),scrollbarWidth>0&&(document.body.style.paddingRight=scrollbarWidth+"px");let t=document.querySelector(".main-container-border");t&&t.classList.add("modal-open"),document.addEventListener("keydown",handleEscapeKey),currentModalElement.querySelector(".custom-modal-content").focus()}function closeInfoModal(){currentModalElement&&(currentModalElement.classList.remove("show"),currentModalElement.querySelector(".custom-modal-content").classList.remove("show"),document.removeEventListener("keydown",handleEscapeKey),currentModalElement.addEventListener("transitionend",()=>{if(currentModalElement&&!currentModalElement.classList.contains("show")){document.body.removeChild(currentModalElement),currentModalElement=null,document.body.classList.remove("modal-open"),document.documentElement.classList.remove("modal-open"),document.body.style.paddingRight="";let e=document.querySelector(".main-container-border");e&&e.classList.remove("modal-open"),window.scrollTo(0,lastScrollY)}},{once:!0}))}function debounce(e,t){let l;return function(...n){let a=this;clearTimeout(l),l=setTimeout(()=>e.apply(a,n),t)}}function renderApp(e){let t=document.getElementById("app-root");if(!t){console.error("App root element not found!");return}t.innerHTML="";let l=document.createElement("div");l.className="main-container-border animate-main-container";let n=document.createElement("div");n.className="shimmer-effect",l.appendChild(n);let a=document.createElement("div");a.className="logo-container";let o=document.createElement("img");o.src="https://res.cloudinary.com/dwbq7b5vg/image/upload/v1751868710/logo_taaz_hwq7ly.png",o.alt="לוגו תעץ",o.className="taaz-main-logo",o.loading="lazy",a.appendChild(o),l.appendChild(a);let r=document.createElement("h1");r.textContent=e.mainTitle,l.appendChild(r),e.introParagraphs.forEach(e=>{let t=document.createElement("p");t.className="intro-paragraph-text",t.textContent=e,l.appendChild(t)});let s=document.createElement("p");s.className="motto-text",s.textContent=e.motto,l.appendChild(s);let i=document.createElement("input");i.type="text",i.placeholder="חיפוש...",i.className="search-input",i.setAttribute("aria-label","חיפוש בתוכן"),l.appendChild(i);let d=document.createElement("div");d.className="accordion-container",l.appendChild(d),e.sections.forEach(e=>{let t=document.createElement("div");t.className="accordion-item-container";let l=document.createElement("button");l.className="accordion-header-button",l.setAttribute("aria-expanded","false"),l.setAttribute("aria-controls",e.id+"-collapse");let n=document.createElement("span");n.className="accordion-title-text",n.textContent=e.title,l.appendChild(n);let a=document.createElement("span");a.className="arrow-icon",a.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
            </svg>
        `,l.appendChild(a);let o=document.createElement("div");if(o.id=e.id+"-collapse",o.className="collapse-grid",e.isDirectContent){let r=document.createElement("div");"head-of-taatz-message"===e.id||(r.className="content-section"),r.innerHTML=e.contentHtml,o.appendChild(r)}else{let s=document.createElement("div");s.className="sub-card-container",e.subItems.forEach(e=>{let t=document.createElement("button");t.className="subcard-button",t.textContent=e.title,t.onclick=()=>openInfoModal(e.content),s.appendChild(t)}),o.appendChild(s)}l.onclick=()=>{if(window.innerWidth>768)return;let e=t.classList.toggle("open");o.classList.toggle("show",e),l.setAttribute("aria-expanded",e)},t.appendChild(l),t.appendChild(o),d.appendChild(t)}),l.appendChild(d);let c=document.createElement("div");c.className="footer-card";let m=document.createElement("div");m.className="footer-links-container",e.footerLinks.forEach(e=>{let t=document.createElement("a");t.href=e.href,t.target="_blank",t.rel="noopener noreferrer",t.className="footer-link-square",t.setAttribute("aria-label",e.alt);let l=document.createElement("div");if(l.className="footer-svg-icon",e.imgSrc){let n=document.createElement("img");n.src=e.imgSrc,n.alt=e.alt,n.loading="lazy",n.onerror=function(){this.src="https://placehold.co/32x32/cccccc/000000?text=Error"},l.appendChild(n)}else if(e.svgContent){let a=document.createElement("div");a.innerHTML=e.svgContent,a.firstChild&&l.appendChild(a.firstChild)}t.appendChild(l),m.appendChild(t)}),c.appendChild(m),t.appendChild(l),t.appendChild(c);let p=debounce(t=>{let l=t.target.value.toLowerCase();e.sections.forEach(e=>{let t=document.getElementById(e.id+"-collapse").closest(".accordion-item-container"),n=!1;if(e.title.toLowerCase().includes(l)&&(n=!0),e.isDirectContent)e.contentHtml.toLowerCase().includes(l)&&(n=!0);else{let a=e.subItems.filter(e=>e.title.toLowerCase().includes(l)||e.content.toLowerCase().includes(l));a.length>0&&(n=!0);let o=t.querySelectorAll(".subcard-button");o.forEach(t=>{let n=e.subItems.find(e=>e.title===t.textContent);n&&(n.title.toLowerCase().includes(l)||n.content.toLowerCase().includes(l))?t.style.display="block":t.style.display="none"})}if(""===l){t.style.display="block",window.innerWidth<=768&&(t.classList.remove("open"),document.getElementById(e.id+"-collapse").classList.remove("show"));let r=t.querySelectorAll(".subcard-button");r.forEach(e=>{e.style.display="block"})}else n?(t.style.display="block",t.classList.add("open"),document.getElementById(e.id+"-collapse").classList.add("show")):t.style.display="none"})},300);i.addEventListener("input",p);let u=document.getElementById("scroll-to-top-btn");window.addEventListener("scroll",()=>{window.scrollY>300?u.classList.add("show"):u.classList.remove("show")}),u.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("click",function(e){let t="";if(e.target.classList.contains("copy-button")){let l=e.target.closest(".content-section");if(l){let n=l.querySelectorAll("p"),a=l.querySelectorAll("li");n.forEach(e=>{t+=e.textContent+"\n"}),a.forEach(e=>{t+="- "+e.textContent+"\n"})}}if(t)try{let o=document.createElement("textarea");o.value=t,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o);let r=document.createElement("div");r.textContent="הועתק!",r.style.cssText=`
                    position: fixed;
                    bottom: 80px;
                    right: 20px;
                    background-color: #28a745;
                    color: white;
                    padding: 10px 15px;
                    border-radius: 8px;
                    z-index: 1060;
                    opacity: 0;
                    transition: opacity 0.3s ease-out;
                `,document.body.appendChild(r),setTimeout(()=>{r.style.opacity="1"},10),setTimeout(()=>{r.style.opacity="0",r.addEventListener("transitionend",()=>r.remove())},1500)}catch(s){console.error("Failed to copy text: ",s)}})}document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded - Initializing app for sal_kelim.html"),window.salKelimContentData?renderApp(window.salKelimContentData):console.error("salKelimContentData is not defined.")});
