function createSvgElement(a,b){const c=document.createElementNS("http://www.w3.org/2000/svg",a);for(const d in b)b.hasOwnProperty(d)&&("xlinkHref"===d?c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b[d]):c.setAttribute(d,b[d]));return c}let currentModalElement=null,lastScrollY=0,scrollbarWidth=0;function getScrollbarWidth(){const a=document.createElement("div");a.style.visibility="hidden";a.style.overflow="scroll";document.body.appendChild(a);const b=document.createElement("div");a.appendChild(b);const c=a.offsetWidth-b.offsetWidth;return a.parentNode.removeChild(a),c}function handleEscapeKey(a){"Escape"===a.key&&closeInfoModal()}function createInfoModalStructure(a,b){const c=document.createElement("div");c.innerHTML=b;const d=c.querySelector("h2"),e=d?d.textContent:"פרטים נוספים",f=document.createElement("div");f.className="custom-modal-backdrop";f.setAttribute("aria-modal","true");f.setAttribute("role","dialog");const g=document.createElement("div");g.className="custom-modal-content";const h=document.createElement("div");h.className="custom-modal-header";const i=document.createElement("h2");i.className="custom-modal-title";i.textContent=e;i.id="modal-title";const j=document.createElement("button");return j.className="custom-modal-close-button",j.innerHTML="&times;",j.onclick=a,j.setAttribute("aria-label","סגור"),h.appendChild(i),h.appendChild(j),d&&d.remove(),c.innerHTML=c.innerHTML,g.appendChild(h),g.appendChild(c),f.appendChild(g),f.addEventListener("click",a=>{a.target===f&&a()}),f}function openInfoModal(a){currentModalElement&&document.body.contains(currentModalElement)&&(document.body.removeChild(currentModalElement),document.removeEventListener("keydown",handleEscapeKey),currentModalElement=null),lastScrollY=window.scrollY,0===scrollbarWidth&&(scrollbarWidth=getScrollbarWidth()),currentModalElement=createInfoModalStructure(closeInfoModal,a),document.body.appendChild(currentModalElement),requestAnimationFrame(()=>{currentModalElement.classList.add("show"),currentModalElement.querySelector(".custom-modal-content").classList.add("show")}),document.body.classList.add("modal-open"),document.documentElement.classList.add("modal-open"),scrollbarWidth>0&&(document.body.style.paddingRight=scrollbarWidth+"px");const b=document.querySelector(".main-container-border");b&&b.classList.add("modal-open"),document.addEventListener("keydown",handleEscapeKey),currentModalElement.querySelector(".custom-modal-content").focus()}function closeInfoModal(){currentModalElement&&(currentModalElement.classList.remove("show"),currentModalElement.querySelector(".custom-modal-content").classList.remove("show"),document.removeEventListener("keydown",handleEscapeKey),currentModalElement.addEventListener("transitionend",()=>{currentModalElement&&!currentModalElement.classList.contains("show")&&(document.body.removeChild(currentModalElement),currentModalElement=null,document.body.classList.remove("modal-open"),document.documentElement.classList.remove("modal-open"),document.body.style.paddingRight="");const a=document.querySelector(".main-container-border");a&&a.classList.remove("modal-open"),window.scrollTo(0,lastScrollY)},{once:!0}))}function debounce(a,b){let c;return function(...d){const e=this;clearTimeout(c),c=setTimeout(()=>a.apply(e,d),b)}}function renderApp(a){const b=document.getElementById("app-root");if(!b)return void console.error("App root element not found!");b.innerHTML="";const c=document.createElement("div");c.className="main-container-border animate-main-container";const d=document.createElement("div");d.className="shimmer-effect",c.appendChild(d);const e=document.createElement("div");e.className="logo-container";const f=document.createElement("img");f.src="https://res.cloudinary.com/dwbq7b5vg/image/upload/v1751868710/logo_taaz_hwq7ly.png",f.alt="לוגו תעץ",f.className="taaz-main-logo",f.loading="lazy",e.appendChild(f),c.appendChild(e);const g=document.createElement("h1");g.textContent=a.mainTitle,c.appendChild(g),a.introParagraphs.forEach(a=>{const b=document.createElement("p");b.className="intro-paragraph-text",b.textContent=a,c.appendChild(b)});const h=document.createElement("p");h.className="motto-text",h.textContent=a.motto,c.appendChild(h);const i=document.createElement("input");i.type="text",i.placeholder="חיפוש...",i.className="search-input",i.setAttribute("aria-label","חיפוש בתוכן"),c.appendChild(i);const j=document.createElement("div");j.className="accordion-container",c.appendChild(j),a.sections.forEach(a=>{const b=document.createElement("div");b.className="accordion-item-container";const d=document.createElement("button");d.className="accordion-header-button",d.setAttribute("aria-expanded","false"),d.setAttribute("aria-controls",a.id+"-collapse");const e=document.createElement("span");e.className="accordion-title-text",e.textContent=a.title,d.appendChild(e);const f=document.createElement("span");f.className="arrow-icon",f.innerHTML=`\n            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-5 h-5">\n                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />\n            </svg>\n        `,d.appendChild(f);const g=document.createElement("div");g.id=a.id+"-collapse",g.className="collapse-grid",a.isDirectContent?(("head-of-taatz-message"===a.id?g:((h=document.createElement("div")).className="content-section",h)).innerHTML=a.contentHtml,g.appendChild(h)):(h=document.createElement("div"),h.className="sub-card-container",a.subItems.forEach(a=>{const b=document.createElement("button");b.className="subcard-button",b.textContent=a.title,b.onclick=()=>openInfoModal(a.content),h.appendChild(b)}),g.appendChild(h)),d.onclick=()=>{if(window.innerWidth>768)return;const c=b.classList.toggle("open");g.classList.toggle("show",c),d.setAttribute("aria-expanded",c)},b.appendChild(d),b.appendChild(g),j.appendChild(b)});const k=document.createElement("footer");k.className="footer-card";const l=document.createElement("div");l.className="footer-links-container",a.footerLinks.forEach(a=>{const b=document.createElement("a");b.href=a.href,b.target="_blank",b.rel="noopener noreferrer",b.className="footer-link-square",b.setAttribute("aria-label",a.alt);const c=document.createElement("div");c.className="footer-svg-icon",a.imgSrc?(d=document.createElement("img"),d.src=a.imgSrc,d.alt=a.alt,d.loading="lazy",d.onerror=function(){this.src="https://placehold.co/32x32/cccccc/000000?text=Error"},c.appendChild(d)):a.svgContent&&(d=document.createElement("div"),d.innerHTML=a.svgContent,d.firstChild&&c.appendChild(d.firstChild)),b.appendChild(c),l.appendChild(b)});var h;k.appendChild(l),b.appendChild(c),b.appendChild(k);const m=debounce(b=>{const c=b.target.value.toLowerCase();a.sections.forEach(a=>{const b=document.getElementById(a.id+"-collapse").closest(".accordion-item-container");let d=!1;if(a.title.toLowerCase().includes(c)&&(d=!0),!a.isDirectContent){const e=a.subItems.filter(a=>a.title.toLowerCase().includes(c)||a.content.toLowerCase().includes(c));e.length>0&&(d=!0);const f=b.querySelectorAll(".subcard-button");f.forEach(b=>{const e=a.subItems.find(a=>a.title===b.textContent);e&&(e.title.toLowerCase().includes(c)||e.content.toLowerCase().includes(c))?b.style.display="block":b.style.display="none"})}else a.contentHtml.toLowerCase().includes(c)&&(d=!0);""===c?(b.style.display="block",window.innerWidth<=768&&(b.classList.remove("open"),document.getElementById(a.id+"-collapse").classList.remove("show")),b.querySelectorAll(".subcard-button").forEach(a=>{a.style.display="block"})):d?(b.style.display="block",b.classList.add("open"),document.getElementById(a.id+"-collapse").classList.add("show")):(b.style.display="none")})},300);i.addEventListener("input",m);const n=document.getElementById("scroll-to-top-btn");window.addEventListener("scroll",()=>{window.scrollY>300?n.classList.add("show"):n.classList.remove("show")}),n.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("click",function(a){let b="";if(a.target.classList.contains("copy-button")){const c=a.target.closest(".content-section");if(c){const a=c.querySelectorAll("p"),d=c.querySelectorAll("li");a.forEach(a=>{b+=a.textContent+"\n"}),d.forEach(a=>{b+="- "+a.textContent+"\n"})}}if(b){try{const c=document.createElement("textarea");c.value=b,document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c);const d=document.createElement("div");d.textContent="הועתק!",d.style.cssText="\n                    position: fixed;\n                    bottom: 80px;\n                    right: 20px;\n                    background-color: #28a745;\n                    color: white;\n                    padding: 10px 15px;\n                    border-radius: 8px;\n                    z-index: 1060;\n                    opacity: 0;\n                    transition: opacity 0.3s ease-out;\n                ",document.body.appendChild(d),setTimeout(()=>{d.style.opacity="1"},10),setTimeout(()=>{d.style.opacity="0",d.addEventListener("transitionend",()=>d.remove())},1500)}catch(a){console.error("Failed to copy text: ",a)}}})}document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded - Initializing app for sal_kelim.html"),window.salKelimContentData?renderApp(window.salKelimContentData):console.error("salKelimContentData is not defined.")});
